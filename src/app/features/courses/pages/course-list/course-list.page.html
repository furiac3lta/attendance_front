<div class="course-list-container" *ngIf="!loading; else loadingTpl">
  <h2>üìò Mis cursos</h2>

  <div class="actions" style="margin-bottom: 1rem;">
    <button class="btn btn-primary" (click)="goToCreateCourse()">
      ‚ûï Nuevo curso
    </button>
  </div>

  <div *ngIf="courses.length === 0; else tableTpl" class="no-courses">
    ‚ö†Ô∏è No hay cursos disponibles para tu organizaci√≥n.
  </div>

  <ng-template #tableTpl>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Nombre del curso</th>
          <th>Descripci√≥n</th>
          <th>Programa</th>
          <th>Instructor actual</th>
          <th>Asignar Instructor</th>
          <th>Acciones</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let c of courses">
          <td>{{ c.name }}</td>
          <td>{{ c.description }}</td>
          <td>{{ c.universityProgram }}</td>

          <!-- ‚úÖ Mostrar instructor -->
          <td>
            <span *ngIf="c.instructorName && c.instructorName !== 'Sin asignar'">
              {{ c.instructorName }}
            </span>
            <span *ngIf="!c.instructorName || c.instructorName === 'Sin asignar'">
              <i>Sin asignar</i>
            </span>
          </td>

          <!-- ‚úÖ Selector de instructor -->
          <td>
            <select [(ngModel)]="c.selectedInstructorId">
              <option [ngValue]="null">-- Seleccionar --</option>
              <option *ngFor="let inst of instructors" [ngValue]="inst.id">
                {{ inst.fullName }}
              </option>
            </select>

            <button class="btn btn-success btn-sm"
              (click)="saveInstructor(c.id!, c.selectedInstructorId!)"
              [disabled]="!c.selectedInstructorId">
              Guardar
            </button>
          </td>

          <!-- ‚úÖ Acci√≥n tomar asistencia -->
          <td>
            <button
              class="btn btn-success"
              (click)="goToAttendance(c.id!)"
              *ngIf="canTakeAttendance()"
            >
              üßæ Tomar asistencia
            </button>

            <span *ngIf="!canTakeAttendance()" style="color: #888;">
              üö´ Sin permisos
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </ng-template>

  <p *ngIf="message" class="message">{{ message }}</p>
</div>

<ng-template #loadingTpl>
  <p class="loading">‚è≥ Cargando cursos...</p>
</ng-template>

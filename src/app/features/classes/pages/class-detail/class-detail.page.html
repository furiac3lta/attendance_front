<mat-card class="attendance-container">

  <h2>Reporte mensual - {{ selectedCourseName }}</h2>
  <p class="date-label">{{ currentDate }}</p>

 <!-- ===================== -->
<!-- üìÖ FILTROS MES / A√ëO -->
<!-- ===================== -->
<div class="filters-chip-container">

  <!-- Mes -->
  <div class="chip-filter-block">
    <span class="chip-title">Mes:</span>
    <mat-chip-listbox class="chip-row" [(ngModel)]="selectedMonth" (ngModelChange)="reloadReport()">
      <mat-chip-option *ngFor="let m of months" [value]="m.value">
        {{ m.label }}
      </mat-chip-option>
    </mat-chip-listbox>
  </div>

  <!-- A√±o -->
  <div class="chip-filter-block">
    <span class="chip-title">A√±o:</span>
    <mat-chip-listbox class="chip-row" [(ngModel)]="selectedYear" (ngModelChange)="reloadReport()">
      <mat-chip-option *ngFor="let y of years" [value]="y">
        {{ y }}
      </mat-chip-option>
    </mat-chip-listbox>
  </div>

</div>

  <!-- BOTONES -->
  <div class="center-actions">
    <button mat-raised-button color="primary" (click)="createClass()">
      Crear nueva clase
    </button>
  </div>

  <button mat-stroked-button color="accent" class="report-btn" (click)="goToReport()">
    Ver reporte mensual
  </button>

  <mat-divider></mat-divider>

  <!-- LISTA DE CLASES -->
  <div *ngIf="classes.length === 0" class="no-classes">
    ‚ö†Ô∏è Este curso no tiene clases creadas todav√≠a.
  </div>

  <mat-list *ngIf="classes.length > 0" class="class-list">
    <mat-list-item *ngFor="let c of classes" class="class-item">

      <span class="class-text">
        {{ c.name }} - {{ c.date | date:'dd/MM/yyyy' }}
      </span>

      <span class="spacer"></span>

      <button mat-raised-button color="primary" *ngIf="!c.attendanceTaken"
              (click)="goToAttendance(c.id)">
        Tomar asistencia
      </button>

      <button mat-raised-button color="warn" *ngIf="c.attendanceTaken"
              (click)="goToAttendance(c.id)">
        Editar asistencia
      </button>

    </mat-list-item>
  </mat-list>

  <p *ngIf="message" class="message">{{ message }}</p>

</mat-card>
